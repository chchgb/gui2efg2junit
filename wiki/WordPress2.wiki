#summary Info and test results for Wordpress 2.
#labels Phase-QA

= Introduction =

Wordpress 2 is being developed at the moment. Here's the Trac repository.

https://android.trac.wordpress.org/

The source code can be found here:

http://android.svn.wordpress.org/

See also: WordpressForAndroid

= Issues =

== Stats and Back ==

==== Bad Token Exception when dismissing stats too fast ====

Rev. 412 suffers a crash when the Stats page is opened and closed in rapid succession. To reproduce the bug:

 * Click _Stats_
 * Click the BACK button even before the throbber appears
 * Wait

{{{
11-10 14:28:40.664: W/dalvikvm(388): threadid=1: thread exiting with uncaught exception (group=0x40015560)
11-10 14:28:40.673: E/AndroidRuntime(388): FATAL EXCEPTION: main
11-10 14:28:40.673: E/AndroidRuntime(388): android.view.WindowManager$BadTokenException: Unable to add window -- token android.os.BinderProxy@4065a618 is not valid; is your activity running?
11-10 14:28:40.673: E/AndroidRuntime(388): 	at android.view.ViewRoot.setView(ViewRoot.java:527)
11-10 14:28:40.673: E/AndroidRuntime(388): 	at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
11-10 14:28:40.673: E/AndroidRuntime(388): 	at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
11-10 14:28:40.673: E/AndroidRuntime(388): 	at android.view.Window$LocalWindowManager.addView(Window.java:424)
11-10 14:28:40.673: E/AndroidRuntime(388): 	at android.app.Dialog.show(Dialog.java:241)
11-10 14:28:40.673: E/AndroidRuntime(388): 	at android.app.Activity.showDialog(Activity.java:2566)
11-10 14:28:40.673: E/AndroidRuntime(388): 	at android.app.Activity.showDialog(Activity.java:2524)
11-10 14:28:40.673: E/AndroidRuntime(388): 	at org.wordpress.android.ViewStats$statsUserDataTask.onPostExecute(ViewStats.java:1012)
11-10 14:28:40.673: E/AndroidRuntime(388): 	at org.wordpress.android.ViewStats$statsUserDataTask.onPostExecute(ViewStats.java:1)
11-10 14:28:40.673: E/AndroidRuntime(388): 	at android.os.AsyncTask.finish(AsyncTask.java:417)
11-10 14:28:40.673: E/AndroidRuntime(388): 	at android.os.AsyncTask.access$300(AsyncTask.java:127)
11-10 14:28:40.673: E/AndroidRuntime(388): 	at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
11-10 14:28:40.673: E/AndroidRuntime(388): 	at android.os.Handler.dispatchMessage(Handler.java:99)
11-10 14:28:40.673: E/AndroidRuntime(388): 	at android.os.Looper.loop(Looper.java:123)
11-10 14:28:40.673: E/AndroidRuntime(388): 	at android.app.ActivityThread.main(ActivityThread.java:3683)
11-10 14:28:40.673: E/AndroidRuntime(388): 	at java.lang.reflect.Method.invokeNative(Native Method)
11-10 14:28:40.673: E/AndroidRuntime(388): 	at java.lang.reflect.Method.invoke(Method.java:507)
11-10 14:28:40.673: E/AndroidRuntime(388): 	at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-10 14:28:40.673: E/AndroidRuntime(388): 	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-10 14:28:40.673: E/AndroidRuntime(388): 	at dalvik.system.NativeStart.main(Native Method)
}}}

== Crash On Edit Page ==

==== Cursor Error when trying to edit a page ====

All rev.s from 398 to 409 crash when trying to edit a post for the second time. To reproduce the bug, setup a new blog, then:

 * Click _Pages_
 * Click _About_
 * Click the edit button (the notepad right after the title)
 * Push the BACK button
 * Click the edit button again

{{{
11-10 12:07:02.163: E/AndroidRuntime(521): FATAL EXCEPTION: main
11-10 12:07:02.163: E/AndroidRuntime(521): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.wordpress.android/org.wordpress.android.EditPost}: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
11-10 12:07:02.163: E/AndroidRuntime(521): 	at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
11-10 12:07:02.163: E/AndroidRuntime(521): 	at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
11-10 12:07:02.163: E/AndroidRuntime(521): 	at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-10 12:07:02.163: E/AndroidRuntime(521): 	at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
11-10 12:07:02.163: E/AndroidRuntime(521): 	at android.os.Handler.dispatchMessage(Handler.java:99)
11-10 12:07:02.163: E/AndroidRuntime(521): 	at android.os.Looper.loop(Looper.java:123)
11-10 12:07:02.163: E/AndroidRuntime(521): 	at android.app.ActivityThread.main(ActivityThread.java:3683)
11-10 12:07:02.163: E/AndroidRuntime(521): 	at java.lang.reflect.Method.invokeNative(Native Method)
11-10 12:07:02.163: E/AndroidRuntime(521): 	at java.lang.reflect.Method.invoke(Method.java:507)
11-10 12:07:02.163: E/AndroidRuntime(521): 	at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-10 12:07:02.163: E/AndroidRuntime(521): 	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-10 12:07:02.163: E/AndroidRuntime(521): 	at dalvik.system.NativeStart.main(Native Method)
11-10 12:07:02.163: E/AndroidRuntime(521): Caused by: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
11-10 12:07:02.163: E/AndroidRuntime(521): 	at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
11-10 12:07:02.163: E/AndroidRuntime(521): 	at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
11-10 12:07:02.163: E/AndroidRuntime(521): 	at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:41)
11-10 12:07:02.163: E/AndroidRuntime(521): 	at org.wordpress.android.WordPressDB.loadPost(WordPressDB.java:1153)
11-10 12:07:02.163: E/AndroidRuntime(521): 	at org.wordpress.android.models.Post.<init>(Post.java:85)
11-10 12:07:02.163: E/AndroidRuntime(521): 	at org.wordpress.android.EditPost.onCreate(EditPost.java:191)
11-10 12:07:02.163: E/AndroidRuntime(521): 	at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-10 12:07:02.163: E/AndroidRuntime(521): 	at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
11-10 12:07:02.163: E/AndroidRuntime(521): 	... 11 more
11-10 12:07:02.183: W/ActivityManager(61): Error in app org.wordpress.android running instrumentation ComponentInfo{com.nofatclips.crawler/android.test.InstrumentationTestRunner}:
11-10 12:07:02.183: W/ActivityManager(61):   android.database.CursorIndexOutOfBoundsException
11-10 12:07:02.183: W/ActivityManager(61):   android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
}}}

== Hello World ==

==== Unable to open default "Hello World!" post ====

The rev. 394 crashes when trying to open the default post. To reproduce the bug, setup a new blog, then:

 * Click _Posts_
 * Click _Hello World!_

{{{
11-09 21:38:43.496: E/AndroidRuntime(870): FATAL EXCEPTION: main
11-09 21:38:43.496: E/AndroidRuntime(870): java.lang.StringIndexOutOfBoundsException
11-09 21:38:43.496: E/AndroidRuntime(870): 	at java.lang.String.substring(String.java:1651)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at org.wordpress.android.util.HtmlToSpannedConverter.characters(WPHtml.java:928)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at org.ccil.cowan.tagsoup.Parser.pcdata(Parser.java:994)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at org.ccil.cowan.tagsoup.HTMLScanner.scan(HTMLScanner.java:522)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at org.ccil.cowan.tagsoup.Parser.parse(Parser.java:449)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at org.wordpress.android.util.HtmlToSpannedConverter.convert(WPHtml.java:455)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at org.wordpress.android.util.WPHtml.fromHtml(WPHtml.java:154)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at org.wordpress.android.util.WPHtml.fromHtml(WPHtml.java:117)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at org.wordpress.android.ViewPostFragment.loadPost(ViewPostFragment.java:98)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at org.wordpress.android.ViewPostFragment.onActivityCreated(ViewPostFragment.java:26)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:760)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:933)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:578)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1219)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:380)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at android.os.Handler.handleCallback(Handler.java:587)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at android.os.Handler.dispatchMessage(Handler.java:92)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at android.os.Looper.loop(Looper.java:123)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at android.app.ActivityThread.main(ActivityThread.java:3683)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at java.lang.reflect.Method.invokeNative(Native Method)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at java.lang.reflect.Method.invoke(Method.java:507)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-09 21:38:43.496: E/AndroidRuntime(870): 	at dalvik.system.NativeStart.main(Native Method)
}}}

= Test Results from 10 Nov 2011 (Changeset 412 with AndCrawler r-76) =

The test stopped due to the [#Stats_and_Back Stats and Back] issue reported above.
Complete log is provided:

 * Log: http://gui2efg2junit.googlecode.com/files/wordpress2_crashlog_20111110_bis.txt

= Test Results from 10 Nov 2011 (Changeset 398 with AndCrawler r-76) =

The test stopped due to the [#Crash_On_Edit_Page Edit Page] issue reported above.
Incomplete GUI Tree (40 traces) and a log for the last trace (#48) are provided:

 * Gui Tree: http://gui2efg2junit.googlecode.com/files/wordpress2_20111110.xml
 * Log: http://gui2efg2junit.googlecode.com/files/wordpress2_crashlog_20111110.txt

A bug report was filed:

https://android.trac.wordpress.org/ticket/207

The bug has been fixed in [https://android.trac.wordpress.org/changeset/412 Changeset 412].

= Test Results from 09 Nov 2011 (Changeset 394 with AndCrawler r-75) =

The test stopped due to the [#Hello_World Hello World!] issue reported above. Complete log is provided:

http://gui2efg2junit.googlecode.com/files/wordpress2_crashlog_20111109.txt

A bug report was filed:

https://android.trac.wordpress.org/ticket/206

The bug has been fixed in [https://android.trac.wordpress.org/changeset/398 Changeset 398].